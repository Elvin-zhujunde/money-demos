import{_ as y,r as i,j as C,b as l,c as o,w as s,g as u,h as _,i as m,o as h,d as v,F as b,e as N,t as p,m as k}from"./index-9778kytf.js";const V={class:"teaching-courses"},j={__name:"TeachingCourses",setup(B){const n=i(!1),c=i([]),x=[{title:"课程名称",dataIndex:"subject_name",width:"30%"},{title:"学时",dataIndex:"class_hours",width:"15%"},{title:"学分",dataIndex:"credits",width:"15%"},{title:"学期",dataIndex:"semester",width:"15%"},{title:"选课人数",dataIndex:"capacity",width:"25%"}],w=[{title:"学号",dataIndex:"student_id",width:"15%"},{title:"姓名",dataIndex:"name",width:"10%"},{title:"性别",dataIndex:"gender",width:"10%"},{title:"院系",dataIndex:"department_name",width:"20%"},{title:"专业",dataIndex:"major_name",width:"20%"},{title:"班级",dataIndex:"class_name",width:"15%"},{title:"选课时间",dataIndex:"selection_date",width:"10%",customRender:({text:t})=>new Date(t).toLocaleDateString("zh-CN")}],g=async()=>{n.value=!0;try{const t=localStorage.getItem("userId"),e=await u.get(`/teacher-courses/${t}`);e.data.success&&(c.value=e.data.data)}catch(t){console.error("获取课程列表失败:",t),_.error("获取课程列表失败")}finally{n.value=!1}},I=async(t,e)=>{if(t&&!e.students)try{const a=await u.get(`/course-students/${e.course_id}`);a.data.success&&(e.students=a.data.data)}catch(a){console.error("获取学生列表失败:",a),_.error("获取学生列表失败")}};return C(()=>{g()}),(t,e)=>{const a=m("a-table"),f=m("a-card");return h(),l("div",V,[o(f,{bordered:!1},{title:s(()=>e[0]||(e[0]=[v("h2",null,"授课管理",-1)])),default:s(()=>[o(a,{columns:x,"data-source":c.value,loading:n.value,pagination:!1,"row-key":"course_id",onExpand:I},{bodyCell:s(({column:d,record:r})=>[d.dataIndex==="capacity"?(h(),l(b,{key:0},[N(p(r.student_count)+"/"+p(r.max_students),1)],64)):k("",!0)]),expandedRowRender:s(({record:d})=>[o(a,{columns:w,"data-source":d.students,pagination:!1,size:"small"},null,8,["data-source"])]),_:1},8,["data-source","loading"])]),_:1})])}}},E=y(j,[["__scopeId","data-v-1bdca8c2"]]);export{E as default};
