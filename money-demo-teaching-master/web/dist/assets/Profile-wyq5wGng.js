import{_ as j,r as _,j as D,b as i,c as e,w as a,g,h,i as c,o as f,d as I,F as v,e as l,t as s,m as V}from"./index-9778kytf.js";const B={class:"profile-container"},P={__name:"Profile",setup(z){const m=_(localStorage.getItem("role")),n=_({}),o=_({}),d=_(!1),y=[{title:"课程名称",dataIndex:"subject_name",key:"subject_name"},{title:"学分",dataIndex:"credits",key:"credits"},{title:"成绩",dataIndex:"grade",key:"grade"}],b=r=>r?new Date(r).toLocaleDateString("zh-CN"):"",x=async()=>{d.value=!0;try{const r=localStorage.getItem("userId"),u=await g.get(`/teacher/${r}`);u.data.success&&(n.value=u.data.data)}catch(r){console.error("获取教师信息失败:",r),h.error("获取个人信息失败")}finally{d.value=!1}},k=async()=>{d.value=!0;try{const r=localStorage.getItem("userId"),u=await g.get(`/student/${r}`);u.data.success&&(o.value=u.data.data)}catch(r){console.error("获取学生信息失败:",r),h.error("获取个人信息失败")}finally{d.value=!1}};return D(()=>{m.value==="teacher"?x():k()}),(r,u)=>{const t=c("a-descriptions-item"),S=c("a-descriptions"),w=c("a-divider"),C=c("a-table"),N=c("a-card");return f(),i("div",B,[e(N,{bordered:!1},{title:a(()=>u[0]||(u[0]=[I("h2",null,"个人信息",-1)])),default:a(()=>{var p;return[e(S,{column:2,loading:d.value},{default:a(()=>[m.value==="teacher"?(f(),i(v,{key:0},[e(t,{label:"教师编号"},{default:a(()=>[l(s(n.value.teacher_id),1)]),_:1}),e(t,{label:"姓名"},{default:a(()=>[l(s(n.value.name),1)]),_:1}),e(t,{label:"性别"},{default:a(()=>[l(s(n.value.gender),1)]),_:1}),e(t,{label:"职称"},{default:a(()=>[l(s(n.value.title),1)]),_:1}),e(t,{label:"所属院系"},{default:a(()=>[l(s(n.value.department_name),1)]),_:1}),e(t,{label:"入职日期"},{default:a(()=>[l(s(b(n.value.entry_date)),1)]),_:1}),e(t,{label:"邮箱"},{default:a(()=>[l(s(n.value.email),1)]),_:1}),e(t,{label:"地址"},{default:a(()=>[l(s(n.value.address),1)]),_:1}),e(t,{label:"授课数量"},{default:a(()=>[l(s(n.value.course_count)+" 门 ",1)]),_:1}),e(t,{label:"学生数量"},{default:a(()=>[l(s(n.value.student_count)+" 人 ",1)]),_:1})],64)):(f(),i(v,{key:1},[e(t,{label:"学号"},{default:a(()=>[l(s(o.value.student_id),1)]),_:1}),e(t,{label:"姓名"},{default:a(()=>[l(s(o.value.name),1)]),_:1}),e(t,{label:"性别"},{default:a(()=>[l(s(o.value.gender),1)]),_:1}),e(t,{label:"所属院系"},{default:a(()=>[l(s(o.value.department_name),1)]),_:1}),e(t,{label:"专业"},{default:a(()=>[l(s(o.value.major_name),1)]),_:1}),e(t,{label:"班级"},{default:a(()=>[l(s(o.value.class_name),1)]),_:1}),e(t,{label:"入学日期"},{default:a(()=>[l(s(b(o.value.enrollment_date)),1)]),_:1}),e(t,{label:"学期"},{default:a(()=>[l(" 第 "+s(o.value.semester)+" 学期 ",1)]),_:1}),e(t,{label:"总学分"},{default:a(()=>[l(s(o.value.total_credits),1)]),_:1}),e(t,{label:"GPA"},{default:a(()=>[l(s(o.value.gpa),1)]),_:1}),e(t,{label:"邮箱"},{default:a(()=>[l(s(o.value.email),1)]),_:1}),e(t,{label:"地址"},{default:a(()=>[l(s(o.value.address),1)]),_:1})],64))]),_:1},8,["loading"]),m.value==="student"&&((p=o.value.courses)!=null&&p.length)?(f(),i(v,{key:0},[e(w),u[1]||(u[1]=I("h3",null,"选课记录",-1)),e(C,{columns:y,"data-source":o.value.courses,pagination:!1,size:"small"},null,8,["data-source"])],64)):V("",!0)]}),_:1})])}}},T=j(P,[["__scopeId","data-v-4f622cb1"]]);export{T as default};
