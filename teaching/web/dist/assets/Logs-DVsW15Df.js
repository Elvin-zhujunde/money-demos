import{_ as D,r as a,j as L,b as g,c as m,w as n,g as N,h as S,i as l,o as i,d as z,F as B,e as f,t as h,m as v,l as T}from"./index-9778kytf.js";const V={class:"logs"},F={__name:"Logs",setup(P){const s=a(!1),c=a([]),d=a(1),p=a(10),_=a(0),x=[{title:"操作时间",dataIndex:"operation_time",width:"20%"},{title:"用户ID",dataIndex:"user_id",width:"15%"},{title:"操作类型",dataIndex:"operation_type",width:"10%"},{title:"操作表",dataIndex:"table_name",width:"15%"},{title:"记录ID",dataIndex:"record_id",width:"15%"},{title:"描述",dataIndex:"description",width:"25%"}],w=e=>e?new Date(e).toLocaleString("zh-CN"):"-",y=e=>({create:"success",update:"warning",delete:"error",select:"processing"})[e]||"default",u=async(e=1)=>{s.value=!0;try{const t=await N.get("/logs",{params:{page:e,pageSize:p.value}});t.data.success&&(c.value=t.data.data.list,_.value=t.data.data.total,d.value=e)}catch(t){console.error("获取日志列表失败:",t),S.error("获取日志列表失败")}finally{s.value=!1}},I=e=>{u(e)};return L(()=>{u(1)}),(e,t)=>{const C=l("a-tag"),b=l("a-table"),k=l("a-card");return i(),g("div",V,[m(k,{bordered:!1},{title:n(()=>t[0]||(t[0]=[z("h2",null,"操作日志",-1)])),default:n(()=>[m(b,{columns:x,"data-source":c.value,loading:s.value,pagination:{total:_.value,current:d.value,pageSize:p.value,onChange:I,showTotal:o=>`共 ${o} 条记录`},"row-key":"log_id"},{bodyCell:n(({column:o,record:r})=>[o.dataIndex==="operation_time"?(i(),g(B,{key:0},[f(h(w(r.operation_time)),1)],64)):v("",!0),o.dataIndex==="operation_type"?(i(),T(C,{key:1,color:y(r.operation_type)},{default:n(()=>[f(h(r.operation_type),1)]),_:2},1032,["color"])):v("",!0)]),_:1},8,["data-source","loading","pagination"])]),_:1})])}}},E=D(F,[["__scopeId","data-v-afd7a9da"]]);export{E as default};
